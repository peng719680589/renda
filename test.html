<!DOCTYPE html>
<HTML>
<HEAD>
    <TITLE> ZTREE DEMO </TITLE>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" href="ztree/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script type="text/javascript" src="ztree/js/jquery-1.4.4.min.js"></script>

    <script src="ztree/js/jquery.ztree.all.js"></script>
    <style>
        ul.ztree{
            background-color: #cccccc4f;
        }
    </style>
    <SCRIPT LANGUAGE="JavaScript">
        // token
        var token = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImNyZWF0ZWQiOjE1MjkzNjc5ODE3NDYsImV4cCI6MTUyOTk3Mjc4MX0.btNsPJhg97yT9NIQ7Khaix0jhHylZQKxF8pFQhvZN22taa0CUvBCclgJ_eXuVjukj1AnytzXo0HJSFZVyl2U8Q";
        var zTreeObj;
        // zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）

        function zTreeOnNodeCreated(event, treeId, treeNode) {
            console.log(treeNode.id + ", " + treeNode.name);

        }

        // zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解）
        var zNodes = [];
        $(document).ready(function(){


            var setting = {
                data: {
                    simpleData: {
                        enable: true,
                        idKey: "id",
                        pIdKey: "pId",
                        rootPId: 0
                    }
                },
                callback:{
                onNodeCreated:zTreeOnNodeCreated
                }
            };

            $.ajax({
                async : false,
                url:"http://192.168.0.117:8081/organ/tree/0",
                headers: { "Authorization": "Bearer " + token},
                type:"get",
                contentType:"application/json",
                data:{} ,
                success:function (data) {
                    zNodes =data.obj;
                    console.log(zNodes)
                }
            });

            zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, JSON.parse(zNodes));

        });
    </SCRIPT>
</HEAD>
<BODY>
<div>
    <ul id="treeDemo" class="ztree"></ul>
</div>
</BODY>
</HTML>